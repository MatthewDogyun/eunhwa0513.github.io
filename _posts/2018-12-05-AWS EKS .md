---
layout: post
title: AWS EKS ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ JupyterHub ì„¤ì¹˜í•˜ê¸°
subtitle: ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì—¬ëŸ¬ëª…ì˜ ë¶„ì„ê°€ê°€ í•¨ê»˜ ì‘ì—…í•  ìˆ˜ ìˆëŠ” JupyterHubë¥¼ êµ¬ì¶•í•´ë³´ì‹­ë‹ˆë‹¤. ê°ì ë¶„ë¦¬ëœ í™˜ê²½ì—ì„œ ì¼í•  ìˆ˜ ìˆìœ¼ë©´ ì°¸ ì¢‹ê² ì£ ?
author: ì „ì§€í˜¸
categories: ìœ ì €í”„ë¡œíŒŒì¼
tags: [docker,kubernetes,jupyter,aws]
---

# ì¿ ë²„ë„¤í‹°ìŠ¤ì— JupyterHub ì„¤ì¹˜ ğŸ‘¨â€ğŸ’»

> ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ êµ¬ì¶•ë˜ì–´ ìˆë‹¤ë©´, helm ì°¨íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ JupyterHubë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

ì¼ë‹¨ ì‘ì—…í™˜ê²½ì„ ìˆ˜í–‰í•  í´ë”ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ í´ë”ì•ˆì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

í•´ë‹¹ í´ë”ëŠ” JupyterHubì˜ ì•ìœ¼ë¡œì˜ configrationì„ ë‹´ë‹¹í•  í´ë”ì…ë‹ˆë‹¤.

  

## ì²« ë²ˆì§¸, helm repogitory ì—…ë°ì´íŠ¸

----------

ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì— ì—°ê²°ë˜ì–´ ìˆê³ , helmì´ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ë©´ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¡œ ì°¨íŠ¸ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```csharp
helm repo add jupyterhub https://jupyterhub.github.io/helm-chart/
helm repo update

```

  

ë‹¤ìŒê³¼ ê°™ì€ ì¶œë ¥ì´ ë³´ì—¬ì•¼í•©ë‹ˆë‹¤.

```sql
Hang tight while we grab the latest from your chart repositories...
...Skip local chart repository
...Successfully got an update from the "stable" chart repository
...Successfully got an update from the "jupyterhub" chart repository
Update Complete. âˆ Happy Helming!âˆ

```

  

## ë‘ ë²ˆì§¸, JupyterHub ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ

----------

ì°¨íŠ¸ë¥¼ ë°”ë¡œ ì„¤ì¹˜í•˜ê¸° ë³´ë‹¨ í…œí”Œë¦¿ì˜ êµ¬ì„±ì„ í™•ì¸í•˜ê³  ì„¤ì¹˜í•˜ê¸° ìœ„í•´ ì°¨íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.

```sql
helm fetch jupyterhub/jupyterhub

```

ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ë©´ ì••ì¶•ëœ ì°¨íŠ¸ íŒŒì¼ì´ ë³´ì…ë‹ˆë‹¤. ì••ì¶•ì„ í•´ì œí•©ë‹ˆë‹¤.

```undefined
tar -zxvf .\<ë‹¤ìš´ë¡œë“œëœíŒŒì¼>.tgz

```

  

![ì£¼í”¼í„°í—ˆë¸Œ í´ë”êµ¬ì¡°](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/jhubdir.JPG)

ì£¼í”¼í„°í—ˆë¸Œ í´ë”êµ¬ì¡°

  

## ì„¸ ë²ˆì§¸, í…œí”Œë¦¿ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” êµ¬ì„± íŒŒì¼ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.

----------

helm ì°¨íŠ¸ ë¦¬ì†ŒìŠ¤ì— ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì¹˜í•  êµ¬ì„±ìš”ì†Œì— ëŒ€í•œ ë¦¬ì†ŒìŠ¤ê°€ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ config.yaml íŒŒì¼ì„ ì´ìš©í•˜ë©´ êµ¬ì„±ìš”ì„œì— ëŒ€í•œ í…œí”Œë¦¿ì˜ ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ê·¸ë ‡ê¸°ë•Œë¬¸ì—, config.yamlì„ ë§Œë“¤ì–´ ì°¸ì¡°í•˜ê³  ì„¤ì •ì„ ë³€ê²½í•´ë´…ì‹œë‹¤.

ì•„ë˜ì™€ ê°™ì´ ë¹ˆ config.yamlì„ ë§Œë“¤ì–´ ì‘ì—… í´ë” ë°‘ ì°¨íŠ¸ í´ë”ì—ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.(Chart.yamlê³¼ ê°™ì€ ìœ„ì¹˜)

```ini
# This file can update the JupyterHub Helm chart's default configuration values.
#
# For reference see the configuration reference and default values, but make
# sure to refer to the Helm chart version of interest to you!
#
# Introduction to YAML:     https://www.youtube.com/watch?v=cdLNKUoMc6c
# Chart config reference:   https://zero-to-jupyterhub.readthedocs.io/en/stable/resources/reference.html
# Chart default values:     https://github.com/jupyterhub/zero-to-jupyterhub-k8s/blob/HEAD/jupyterhub/values.yaml
# Available chart versions: https://jupyterhub.github.io/helm-chart/
#

```

  

## ë„¤ ë²ˆì§¸, ì°¨íŠ¸ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì— ë°°í¬í•˜ì—¬ ì„¤ì¹˜í•´ë´…ì‹œë‹¤.

----------

ì°¨íŠ¸ í´ë”ì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.

```vbnet
helm upgrade --cleanup-on-fail --install jhub . --namespace jhub --create-namespace --values config.yaml

```

ğŸ¤¬ğŸ¤¬ğŸ¤¬

ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ìˆë‹¤ë©´, ë°°í¬í™˜ê²½ì— í† í°ì´ ê¼­ í•„ìš”í•˜ë‹¨ ì´ì•¼ê¸°ì…ë‹ˆë‹¤.(ì˜ˆì‹œ: AWS EKS)

![í† í°í•„ìš”](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/tokenerror.JPG)

í† í°í•„ìš”

  

Opensslì´ë‚˜ ì—¬íƒ€ ë‹¤ë¥¸ í† í° ì œë„¤ë ˆì´í„° í”„ë¡œê·¸ë¨ì„ ì´ìš©í•˜ì—¬ 32ìë¦¬ì˜ hexì½”ë“œë¥¼ ì„ì˜ë¡œ ìƒì„±í•´ì£¼ì„¸ìš”.

í´ë” ì•ˆ values.yaml íŒŒì¼ì— ì‹œí¬ë¦¿ í† í°ì„ ì…ë ¥í•˜ëŠ” ê³³ì´ ìˆìŠµë‹ˆë‹¤.

![í† í°ë„£ê¸°](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/requiredtokken.JPG)

í† í°ë„£ê¸°

  

ì‹œí¬ë¦¿ í† í° ì…ë ¥

![í† í°ì„±ê³µ](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/requiredtokkensuccess.JPG)

í† í°ì„±ê³µ

  

ë‹¤ì‹œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.

```vbnet
helm upgrade --cleanup-on-fail --install jhub . --namespace jhub --create-namespace --values config.yaml

```

ì¸ìŠ¤í†¨ì´ ì„±ê³µí–ˆìŠµë‹ˆë‹¤.

![ì£¼í”¼í„°í—ˆë¸Œì¸ìŠ¤í†¨](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/installsuccess.JPG)

ì£¼í”¼í„°í—ˆë¸Œì¸ìŠ¤í†¨

Podê°€ ëª¨ë‘ ì˜ ëŒì•„ê°‘ë‹ˆë‹¤.

```csharp
kubectl get pod -n jhub

```

![ì£¼í”¼í„°í—ˆë¸ŒíŒŒë“œ](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/pods.JPG)

ì£¼í”¼í„°í—ˆë¸ŒíŒŒë“œ

  

ì™¸ë¶€ì ‘ì†ì„ ìœ„í•œ ì„œë¹„ìŠ¤ë„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```csharp
kubectl get svc -n jhub

```

![ì£¼í”¼í„°í—ˆë¸Œì„œë¹„ìŠ¤](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/svc.JPG)

ì£¼í”¼í„°í—ˆë¸Œì„œë¹„ìŠ¤

  

## ë‹¤ì„¯ ë²ˆì§¸, JupyterHub ì ‘ì†í•˜ê¸°

----------

ì„œë¹„ìŠ¤ì— ë‚˜ì˜¨ í¼ë¸”ë¦­ ì£¼ì†Œë¡œ ì ‘ê·¼í•´ë´…ì‹œë‹¤.

![ì™¸ë¶€ì ‘ì†](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/connectsuccess.JPG)

ì™¸ë¶€ì ‘ì†

ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì„¤ì¹˜ëœ ì£¼í”¼í„° í—ˆë¸Œì— ì ‘ì†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!!(ë¡œë“œë°¸ëŸ°ì„œ ì„¤ì •ì€ ë”°ë¡œ í•´ì£¼ì„¸ìš”.)

ì•„ë¬´ ì•„ì´ë””ë¡œ ë¡œê·¸ì¸ì„ í•´ë´…ì‹œë‹¤.

  

ë¡œê·¸ì¸ í›„ì— ì‚¬ìš©ìë³„ ì„œë²„ê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![ì„œë²„ìƒì„±](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/servercreate.JPG)

ì„œë²„ìƒì„±

  

ì£¼í”¼í„° ë…¸íŠ¸ë¶ì´ ë–³ìŠµë‹ˆë‹¤!

![ì£¼í”¼í„°í—ˆë¸Œ](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/jupyterhub.JPG)

ì£¼í”¼í„°í—ˆë¸Œ

  

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ë³´ë©´,

```csharp
kubectl get pod -n jhub

```

![ìœ ì €ë³„íŒŒë“œ](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/userpod.JPG)

ìœ ì €ë³„íŒŒë“œ

ìœ ì €ë³„ë¡œ Podê°€ ìƒì„±ëœ ìœ ì—°í•œ í™˜ê²½ ë¶„ë¦¬ê°€ ê°€ëŠ¥í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

## ë§ˆì§€ë§‰, JupyterHub ì‚­ì œ

----------

JupyterHubë¥¼ ì‚­ì œí•˜ë ¤ë©´ ê°„ë‹¨í•˜ê²Œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.

```undefined
helm uninstall jhub -n jhub

```

  

## ì„ íƒì‚¬í•­(GPU ì„¤ì •)

----------

> GPU í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í–ˆë‹¤ë©´, GPUí”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€ë¡œ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

```cpp
kubectl apply -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v0.8.0/nvidia-device-plugin.yml

```

ì‚¬ìš©ê°€ëŠ¥í•œ gpu ê°¯ìˆ˜ í™•ì¸

```vbnet
kubectl get nodes -o=custom-columns=NAME:.metadata.name,GPUs:.status.capacity.'nvidia\.com/gpu'

```

  

## ê°€ëŠ¥í•œ ê²ƒë“¤

----------

JupyterHubë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì— êµ¬ì¶•í•˜ë¯€ë¡œì„œ ìƒê°í–ˆë˜ ë‘ ê°€ì§€ ëª©í‘œê°€ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.

-   ì‚¬ìš©ì ë³„ ë‹¤ë¥¸ ì£¼í”¼í„° ë…¸íŠ¸ë¶ í™˜ê²½ êµ¬ì„± (pyspark-notebook, datascience-notebook)
-   ì‚¬ìš©ì ë³„ GPU ì ìœ  ì£¼í”¼í„° ë…¸íŠ¸ë¶ (pyspark-notebook, datascience-notebook)

ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œëŠ” config.yamlì„ ìˆ˜ì •í•˜ì—¬ ìœ„ì™€ ê°™ì€ í™œë™ì„ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.

ğŸ–ğŸ–ğŸ–